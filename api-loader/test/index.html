<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Webpack App</title>
  </head>
  <body>
  <script type="text/javascript" src="bundle_58f8b87e.js"></script></body>
  <script>
    let apiList = [
    {
      name: 'get',
      desc: '',
      method: "GET",
      path: 'root/login/LoginController/getUserInfo',
      mockPath: 'mock/root/login/LoginController/getUserInfo',
      params: {token: '',v: 100},
	  headers: {},
	  data: {},
      validator: {
        token: { required: true, type: String, not: '', msg: 'token不能为空!' },
		name: { required: true, type: String, not: '', msg: '名称不能为空!' }
      }
    }
  ]
  let userModules = [
	{
		name: 'get',
		desc: '用户权限列表',
		method: 'GET',
		path: 'root/main/MainController/readUserModules',
		mockPath: 'mock/root/main/MainController/readUserModules',
		params: {token: 'czdg_app'},
	}
  ]
  
  const Loader = new apiLoaderLibrary(
	{'user': apiList, 'modules': userModules}, 
	{
		statusMessage: {
			404: '找不到请求地址'
		},
		console_request_enable: true,
		console_response_enable: false,
		request_error_callback: function({status, statusText}){
			console.info('aaaaaaaa ',status, statusText);
		}
	}, 
	{
		timeout: 1000,
		transformResponse: function(data = {}){
			return data
		}
	}
	)
	window.apiRequestStartHandler = function(){
		console.info('请求开始发送');
	}
	window.apiRequestEndHandler = function(){
		console.info('请求结束');
	}
	window.apiRequestInterceptErrorHandler = function(message){
		console.info(message)
	}
  /*Loader.api['user/get']({params: {token: 'czdg_app'}, data: {name: '123'}}, {
	request_error_callback: function({status, statusText}){
		console.info('bbbbbbbbbbbbb ',status, statusText);
	}
  }).then((response)=>{
    console.info(response);
  }).catch((error)=>{
    console.info(error);
  })*/
  
  /*Loader.api['modules/get']().then((response)=>{
    console.info(response);
  }).catch((error)=>{
    console.info(error);
  })*/
  
  Loader.allApi([Loader.api['user/get']({params: {token: 'czdg_app'}, data: {name: '123'}}), Loader.api['modules/get']()]).then((data)=>{
	console.info('3333333',data);
  }).catch((error)=>{
	console.info('44444444444',error);
  })
</script>
</html>